## freshness configuration is used to control the freshness of the data in the source. The source freshness can be set on a source level and also if we want to set the source freshness for a specific table in the source, we can set it on a table level.
## The source freshness happens at the time of the run and it will check if the source has been updated within the specified time frame. If the source has not been updated within the specified time frame, the run will fail. The source freshness looks at loaded_at field
## in the table or in some cases it will look at metadata generated by the source system to determine the freshness of the data.

sources:
  - name: jaffle_shop  ## this can be referred to as alias for the source
    database: raw
    schema: jaffle_shop  ## dbt assumes that schema name is similar to source name which is on line 2

    tables:
      - name: customers
        columns:
          - name: "id"
            tests:
              - unique
              - not_null
      - name: orders
        config:
          freshness:
            warn_after:
              count: 24
              period: hour
            error_after:
              count: 48
              period: hour
          
          loaded_at_field: _etl_loaded_at  # this is the field that is used to determine the freshness of the data